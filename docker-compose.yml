services:
  shift-bridge:
    build: .
    container_name: shift-bridge
    restart: unless-stopped
    volumes:
      - ./data:/app/data
    environment:
      - JWT_SECRET=${JWT_SECRET}
      - RESEND_API_KEY=${RESEND_API_KEY}
      - APP_URL=${APP_URL:-https://shift-bridge.srv1403391.hstgr.cloud}
      - DB_PATH=/app/data/shift-bridge.db
    labels:
      - traefik.enable=true
      - traefik.http.routers.shift-bridge.rule=Host(`shift-bridge.srv1403391.hstgr.cloud`)
      - traefik.http.routers.shift-bridge.tls=true
      - traefik.http.routers.shift-bridge.entrypoints=web,websecure
      - traefik.http.routers.shift-bridge.tls.certresolver=mytlschallenge
      - traefik.http.services.shift-bridge.loadbalancer.server.port=3000
    networks:
      - n8n_default

networks:
  n8n_default:
    external: true
